// Game Screen - Updated with inline effect pill and undo button in bank card header
    function GameScreen(props) {
      var state = props.state;
      var dispatch = props.dispatch;
      var bankModalState = useState(false);
      var showBankModal = bankModalState[0];
      var setShowBankModal = bankModalState[1];
      var restartState = useState(false);
      var showRestartConfirm = restartState[0];
      var setShowRestartConfirm = restartState[1];
      var wideScreenState = useState(window.innerWidth >= 768);
      var isWideScreen = wideScreenState[0];
      var setIsWideScreen = wideScreenState[1];

      useEffect(function() {
        var handleResize = function() { setIsWideScreen(window.innerWidth >= 768); };
        window.addEventListener('resize', handleResize);
        return function() { window.removeEventListener('resize', handleResize); };
      }, []);

      var isInSafeZone = state.rollCount < 3;
      var currentPlayer = state.players[state.currentPlayerIndex];
      var activePlayers = state.players.filter(function(p) { return !p.hasBanked; });
      var canBank = state.rollCount > 0 && activePlayers.length > 0;

      var handleRoll = function(die1, die2) { dispatch({ type: 'ROLL', die1: die1, die2: die2 }); };

      var handleKeypadInput = function(value, isSeven) {
        if (value === 'doubles') dispatch({ type: 'KEYPAD_INPUT', sum: 0, isDoubles: true, isSeven: false });
        else if (isSeven) dispatch({ type: 'KEYPAD_INPUT', sum: 7, isDoubles: false, isSeven: true });
        else dispatch({ type: 'KEYPAD_INPUT', sum: value, isDoubles: false, isSeven: false });
      };

      var handleBank = function(playerIds) { dispatch({ type: 'BANK_PLAYERS', playerIds: playerIds }); setShowBankModal(false); };

      var getEffectPillClass = function() {
        if (state.lastRollEffect === 'BUST!') return 'effect-pill danger';
        if (state.lastRollEffect === '\u00d72') return 'effect-pill doubles';
        if (state.lastRollEffect === '+70') return 'effect-pill safe';
        return 'effect-pill normal';
      };

      return React.createElement('div', { className: 'app-container' },
        React.createElement('div', { className: 'header' },
          React.createElement('div', { className: 'header-content' },
            React.createElement('div', { className: 'header-left' },
              React.createElement('div', { className: 'header-brand' },
                React.createElement('div', { className: 'brand-icon' }, React.createElement(BankIcon, { size: 22 })),
                React.createElement('h1', { className: 'header-title' }, 'BANK')
              ),
              React.createElement('div', { className: 'header-round' }, 'Round ' + state.currentRound + '/' + state.roundConfig)
            ),
            React.createElement('div', { className: 'header-right' },
              React.createElement('button', { onClick: function() { setShowRestartConfirm(true); }, className: 'icon-btn', title: 'Restart Game' }, React.createElement(Home, { size: 18 })),
              React.createElement('button', { onClick: function() { dispatch({ type: 'TOGGLE_SETTING', setting: 'darkMode' }); }, className: 'icon-btn' },
                state.settings.darkMode ? React.createElement(Sun, { size: 18 }) : React.createElement(Moon, { size: 18 })
              )
            )
          )
        ),
        React.createElement('div', { className: 'game-layout' },
          // Main game area
          React.createElement('div', { className: 'game-main' },
            // Bank card with undo button in header and inline effect pill
            React.createElement('div', { className: 'card p-5 text-center bank-card ' + (isInSafeZone ? 'zone-safe' : 'zone-danger') },
              // Undo button in top right corner
              state.history.length > 0 && React.createElement('div', { className: 'bank-card-header' },
                React.createElement('button', { 
                  onClick: function() { dispatch({ type: 'UNDO' }); }, 
                  className: 'icon-btn icon-btn-subtle',
                  title: 'Undo last action'
                },
                  React.createElement(RotateCcw, { size: 18 })
                )
              ),
              // Zone indicator row
              React.createElement('div', { className: 'flex items-center justify-center gap-2 mb-2' },
                isInSafeZone ?
                  React.createElement(React.Fragment, null, React.createElement(ShieldCheck, { size: 18, style: { color: '#059669' } }), React.createElement('span', { style: { fontSize: '0.875rem', fontWeight: 500, color: '#059669' } }, 'Safe Zone')) :
                  React.createElement(React.Fragment, null, React.createElement(AlertTriangle, { size: 18, style: { color: '#d97706' } }), React.createElement('span', { style: { fontSize: '0.875rem', fontWeight: 500, color: '#d97706' } }, 'Danger Zone')),
                React.createElement('span', { style: { color: 'var(--text-secondary)' } }, '\u2022'),
                React.createElement('span', { style: { fontSize: '0.875rem', color: 'var(--text-secondary)' } }, 'Roll #' + (state.rollCount + 1))
              ),
              // Bank number with inline effect pill
              React.createElement('div', { className: 'bank-score-row' },
                React.createElement('div', { className: 'bank-number' }, React.createElement(AnimatedNumber, { value: state.bankTotal })),
                state.lastRollEffect && React.createElement('div', { className: getEffectPillClass() }, state.lastRollEffect)
              )
            ),
            // Turn indicator
            currentPlayer && !currentPlayer.hasBanked && React.createElement('div', { className: 'turn-indicator text-center' },
              React.createElement('strong', null, currentPlayer.name), "'s turn to roll"
            ),
            // Controls area
            React.createElement('div', { className: 'game-controls' },
              state.settings.virtualDice ?
                React.createElement(VirtualDice, { onRoll: handleRoll, disabled: activePlayers.length === 0 }) :
                isInSafeZone ?
                  React.createElement(SafeZoneKeypad, { onInput: handleKeypadInput, disabled: activePlayers.length === 0 }) :
                  React.createElement(DangerZoneKeypad, { onInput: handleKeypadInput, disabled: activePlayers.length === 0 }),
              React.createElement('button', { onClick: function() { setShowBankModal(true); }, disabled: !canBank, className: 'bank-btn' },
                React.createElement('div', { className: 'flex items-center justify-center gap-3' },
                  React.createElement(Lock, { size: 20 }),
                  React.createElement('span', null, 'BANK ' + state.bankTotal)
                )
              )
            )
          ),
          // Player sidebar
          React.createElement('div', { className: 'game-sidebar card p-4' },
            React.createElement('h2', { className: 'text-lg font-bold mb-3 flex items-center gap-2' }, React.createElement(Users, { size: 20, style: { color: 'var(--text-accent)' } }), ' Players'),
            React.createElement('div', { className: 'flex flex-col gap-2' },
              state.players.map(function(player, index) {
                return React.createElement(PlayerCard, { key: player.id, player: player, isCurrentTurn: index === state.currentPlayerIndex && !player.hasBanked });
              })
            )
          )
        ),
        React.createElement(AppFooter),
        showBankModal && React.createElement(BankingModal, { players: state.players, bankTotal: state.bankTotal, onConfirm: handleBank, onClose: function() { setShowBankModal(false); } }),
        showRestartConfirm && React.createElement('div', { className: 'modal-backdrop', onClick: function() { setShowRestartConfirm(false); } },
          React.createElement('div', { className: 'modal-content', style: { maxWidth: '20rem' }, onClick: function(e) { e.stopPropagation(); } },
            React.createElement('div', { className: 'p-6 text-center' },
              React.createElement(RefreshCw, { size: 48, style: { color: 'var(--text-accent)', margin: '0 auto 1rem' } }),
              React.createElement('h2', { className: 'text-xl font-bold mb-2' }, 'Restart Game?'),
              React.createElement('p', { style: { color: 'var(--text-secondary)', marginBottom: '1.5rem' } }, 'This will end the current game and return to setup.'),
              React.createElement('div', { className: 'flex gap-3' },
                React.createElement('button', { onClick: function() { setShowRestartConfirm(false); }, className: 'btn btn-secondary flex-1' }, 'Cancel'),
                React.createElement('button', { onClick: function() { dispatch({ type: 'NEW_GAME' }); }, className: 'btn btn-danger flex-1' }, 'Restart')
              )
            )
          )
        )
      );
    }